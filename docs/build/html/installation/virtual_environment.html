

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="zh_CN">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>python虚拟环境 &#8212; pyyabc 1.0.0 文档</title>
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/bizstyle.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="Get Start" href="../get_started/index.html" />
    <link rel="prev" title="快速安装" href="quick_install.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总目录"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python 模块索引"
             >模块</a> |</li>
        <li class="right" >
          <a href="../get_started/index.html" title="Get Start"
             accesskey="N">下一页</a> |</li>
        <li class="right" >
          <a href="quick_install.html" title="快速安装"
             accesskey="P">上一页</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pyyabc 1.0.0 文档</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../user_guide/index.html" >用户手册</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">安装说明</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">內容目录</a></h3>
  <ul>
<li><a class="reference internal" href="#">python虚拟环境</a><ul>
<li><a class="reference internal" href="#id1">为什么要使用python虚拟环境?</a></li>
<li><a class="reference internal" href="#id2">什么是python虚拟环境?</a></li>
<li><a class="reference internal" href="#creating-a-virtual-environment">Creating a virtual environment</a></li>
<li><a class="reference internal" href="#creating-a-aiida-folder-in-your-virtualenvironment">Creating a <code class="docutils literal notranslate"><span class="pre">.aiida</span></code> folder in your virtualenvironment</a></li>
</ul>
</li>
</ul>

  <h4>上一个主题</h4>
  <p class="topless"><a href="quick_install.html"
                        title="上一章">快速安装</a></p>
  <h4>下一个主题</h4>
  <p class="topless"><a href="../get_started/index.html"
                        title="下一章">Get Start</a></p>
  <div role="note" aria-label="source link">
    <h3>本页</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/installation/virtual_environment.rst.txt"
            rel="nofollow">显示源代码</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="转向" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="python">
<span id="virtual-environment"></span><h1>python虚拟环境<a class="headerlink" href="#python" title="永久链接至标题">¶</a></h1>
<div class="section" id="id1">
<h2>为什么要使用python虚拟环境?<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
<p>python的软件通常会依赖于其他的第三方python包，而且很多情况下，不同的软件有不同的依赖需求。
如果pyyabc以全局的方式安装，则它可能会升级或者降级已有的第三方python库，这将可能导致其他的软件不可用。
相对的，如果在安装了pyyabc之后又安装了其他的python库或软件，可能打破现有的依赖，这就可能导致pyyabc不可用。</p>
<p>因此，我们 <em>强烈</em> 建议对几种合作使用的软件进行环境独立，以避免软件的不可用。</p>
</div>
<div class="section" id="id2">
<h2>什么是python虚拟环境?<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<p>一个特定python的虚拟环境就是一个包含有环境独立的所有python软件和库的文件夹，文件夹内包含了下列内容：</p>
<ul class="simple">
<li>python 可执行文件(executable)</li>
<li>python 标准包(standard packages)</li>
<li>python包管理软件 如 <code class="docutils literal notranslate"><span class="pre">pip</span></code></li>
<li>一个激活和设置环境变量参数的脚本，用来设置 <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> 和 <code class="docutils literal notranslate"><span class="pre">PATH</span></code> 变量</li>
</ul>
<p>激活环境的脚本确保了新创建的，指定环境文件夹下的python可执行文件在 <code class="docutils literal notranslate"><span class="pre">PATH</span></code> 环境变量的开头，以及所有python的软件包都在虚拟环境的文件夹中。
这就使得可以通过建立多个文件夹来独立python的使用环境。</p>
<p>并且，虚拟环境所依赖的文件夹可以在用户的目录下，这就使得用户创建虚拟环境和安装软件时无须去的管理员权限。</p>
</div>
<div class="section" id="creating-a-virtual-environment">
<h2>Creating a virtual environment<a class="headerlink" href="#creating-a-virtual-environment" title="永久链接至标题">¶</a></h2>
<p>There are different programs that can create and work with virtual environments.
An example for python virtual environments is called <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code> and can be installed with for example <code class="docutils literal notranslate"><span class="pre">pip</span></code> by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install --user -U virtualenv
</pre></div>
</div>
<p>As explained before, a virtual environment is in essence little more than a directory containing everything it needs.
In principle a virtual environment can thus be created anywhere where you can create a directory.
You could for example opt to create a directory for all your virtual environments in your home folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mkdir ~/.virtualenvs
</pre></div>
</div>
<p>Using <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code> you can then create a new virtual environment with python 2.7 by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ virtualenv --python=&lt;path/to/python2.7&gt; ~/.virtualenvs/my_env
</pre></div>
</div>
<p>This will create the environment <code class="docutils literal notranslate"><span class="pre">my_env</span></code> and automatically activate it for you.
If you open a new terminal, or you have deactivated the environment, you can reactivate it as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ~/.virtualenvs/my_env/bin/activate
</pre></div>
</div>
<p>If it is activated successfully, you should see that your prompt is prefixed with the name of the environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(my_env) $
</pre></div>
</div>
<p>To leave or deactivate the environment and set all the settings back to default, simply run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(my_env) $ deactivate
</pre></div>
</div>
</div>
<div class="section" id="creating-a-aiida-folder-in-your-virtualenvironment">
<span id="aiida-path-in-virtualenv"></span><h2>Creating a <code class="docutils literal notranslate"><span class="pre">.aiida</span></code> folder in your virtualenvironment<a class="headerlink" href="#creating-a-aiida-folder-in-your-virtualenvironment" title="永久链接至标题">¶</a></h2>
<p>When you run AiiDA in multiple virtual environments, it can be convenient to use a separate <code class="docutils literal notranslate"><span class="pre">.aiida</span></code> folder for each virtualenv. To do this, you can use the <span class="xref std std-ref">AIIDA_PATH mechanism</span> as follows:</p>
<ol class="arabic">
<li><p class="first">Create your virtualenv, as described above</p>
</li>
<li><p class="first">Create a <code class="docutils literal notranslate"><span class="pre">.aiida</span></code> directory in your virtualenv directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mkdir ~/.virtualenvs/my_env/.aiida
</pre></div>
</div>
</li>
<li><p class="first">At the end of <code class="docutils literal notranslate"><span class="pre">~/.virtualenvs/my_env/bin/activate</span></code>, add the following line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">AIIDA_PATH</span><span class="o">=</span><span class="s1">&#39;~/.virtualenvs/my_env&#39;</span>
</pre></div>
</div>
</li>
<li><p class="first">Deactivate and re-activate the virtualenv</p>
</li>
<li><p class="first">You can test that everything is set up correctly if you can reproduce the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(my_env)$ echo $AIIDA_PATH
&gt;&gt;&gt; ~/.virtualenvs/my_env

(my_env)$ verdi profile list
&gt;&gt;&gt; Configuration folder: /home/my_username/.virtualenvs/my_env/.aiida
&gt;&gt;&gt; Stopping: No configuration file found
&gt;&gt;&gt; Note: if no configuration file was found, it means that you have not run
&gt;&gt;&gt; &#39;verdi setup&#39; yet to configure at least one AiiDA profile.
</pre></div>
</div>
</li>
<li><p class="first">Continue setting up AiiDA with <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">setup</span></code> or <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">quicksetup</span></code>.</p>
</li>
</ol>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总目录"
             >索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python 模块索引"
             >模块</a> |</li>
        <li class="right" >
          <a href="../get_started/index.html" title="Get Start"
             >下一页</a> |</li>
        <li class="right" >
          <a href="quick_install.html" title="快速安装"
             >上一页</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pyyabc 1.0.0 文档</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../user_guide/index.html" >用户手册</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >安装说明</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; 版权所有 2018, Jason Yu, ChangChun He, ShaoBin Qiu.
      由 <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6 创建。
    </div>
  </body>
</html>